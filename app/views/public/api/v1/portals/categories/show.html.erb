<% content_for :head do %>
  <title><%= @category.name %> | <%= @portal.name %></title>
  <% if @category.description.present? %>
    <meta name="description" content="<%= @category.description %>">
  <% end %>
<% end %>

<% if !@is_plain_layout_enabled %>
<div class="bg-woot-50 dark:bg-woot-900" style="<%= generate_portal_bg(@portal.color, @theme) %>">
  <div class="pt-8 pb-8 md:pt-14 md:pb-6" style="<%= generate_gradient_to_bottom(@theme) %>">
    <%= render 'public/api/v1/portals/categories/category-hero', category: @category, portal: @portal %>
  </div>
</div>
<% else %>
  <%= render 'public/api/v1/portals/categories/category-hero', category: @category, portal: @portal %>
<% end %>
<section class="max-w-6xl w-full mx-auto px-8 py-6 flex flex-col items-center justify-center flex-grow">
  <div class="w-full flex flex-col gap-6 flex-grow">
    <% if @category.articles.published.size == 0 %>
    <div class="h-full flex items-center justify-center bg-slate-50 dark:bg-slate-800 rounded-xl py-6">
      <p class="text-sm text-slate-500"><%= I18n.t('public_portal.common.no_articles') %></p>
    </div>
    <% else %>
    <% @category.articles.published.order(:position).each do |article| %>
    <div class="<%= !@is_plain_layout_enabled ? 'border border-solid border-slate-100 dark:border-slate-800 hover:border-woot-600 dark:hover:border-woot-600 rounded-lg' : '' %>">
      <a
        class="<%= !@is_plain_layout_enabled ? 'p-4' : 'px-0 py-1' %> text-slate-800 dark:text-slate-50 flex justify-between content-center hover:cursor-pointer"
        href="/hc/<%= @portal.slug %>/articles/<%= article.slug %><%= @theme.present? ? '?theme='+@theme : ''  %>"
      >
        <div class="flex flex-col gap-5">
          <div class="flex flex-col gap-1">
            <h3 class="text-lg text-slate-900 dark:text-slate-50 font-semibold <%= @is_plain_layout_enabled && 'hover:underline' %>"><%= article.title %></h3>
            <p class="text-base font-normal text-slate-500 dark:text-slate-200 line-clamp-1 break-all"><%= article.content %></p>
          </div>
          <%# By Alexander â€¢  %>
          <%= article.author_id %>
          <span class="text-sm text-slate-600 dark:text-slate-400 font-medium flex items-center"><%= I18n.t('public_portal.common.last_updated_on', last_updated_on: article.updated_at.strftime("%b %d, %Y")) %></span>
        </div>
      </a>
    </div>  
    <% end %>
    <% end %>
  </div>
</section>
